<template>
    <t-page>
        <div slot="top-fix" class="banner">

        </div>
        <div slot="container" class="mecontainer">
        <t-right-menu >
            <div slot="left" class="menu-left" ref="go">
                <p left-item>口味选择</p>
                <p left-item>烤肉类</p>
                <p left-item>蔬菜类</p>
                <p left-item>海鲜类</p>
                <p left-item>锡纸类</p>
                <p left-item>小炒类</p>
                <p left-item>酒水类</p>
            </div>
            <div  slot='right' class="menu-right">
                <div right-item  default-show>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">鸡脆骨112121</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">烤韭菜</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">羊肉串</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">鸡全翅</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">葱香豆皮</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">谈烤肥牛</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">葱香茄子</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                    <div class="food-item">
                        <img src="../assets/imgs/food1.jpg" alt="">
                        <div>
                            <span class="header">台湾热狗</span>
                            <span class="tips">够脆、够香、嘎嘣脆</span>
                            <div><span class="sale">月销量：5435</span><span class="like">赞23</span></div>
                            <span class="price">￥23</span>
                        </div>
                    </div>
                </div>
                <div right-item >
                    <p >羊肉串</p>
                    <p >蜜汁牛排</p>
                    <p >滋补羊腰</p>
                    <p >香辣牛蹄</p>
                    <p >牛肉串</p>
                    <p >牛板筋</p>
                    <p >鸡脆骨</p>
                    <p >鸡全翅</p>
                    <p >鸡中翅</p>
                    <p >鸡腿</p>
                    <p >鸡爪</p>
                    <p >骨肉相连</p>
                    <p >香辣猪蹄</p>
                    <p >麻辣牛肚</p>
                    <p >羊肉串</p>
                    <p >蜜汁牛排</p>
                    <p >滋补羊腰</p>
                    <p >香辣牛蹄</p>
                    <p >牛肉串</p>
                    <p >牛板筋</p>
                    <p >鸡脆骨</p>
                    <p >鸡全翅</p>
                    <p >鸡中翅</p>
                    <p >鸡腿</p>
                    <p >鸡爪</p>
                    <p >骨肉相连</p>
                    <p >香辣猪蹄</p>
                    <p >麻辣牛肚</p>
                    <p >羊肉串</p>
                    <p >蜜汁牛排</p>
                    <p >滋补羊腰</p>
                    <p >香辣牛蹄</p>
                    <p >牛肉串</p>
                    <p >牛板筋</p>
                    <p >鸡脆骨</p>
                    <p >鸡全翅</p>
                    <p >鸡中翅</p>
                    <p >鸡腿</p>
                    <p >鸡爪</p>
                    <p >骨肉相连</p>
                    <p >香辣猪蹄</p>
                    <p >麻辣牛肚</p>
                </div>
                <div right-item>
                    <p >烤韭菜</p>
                    <p >金针菇</p>
                    <p >娃娃菜</p>
                    <p >土豆片</p>
                    <p >四季豆</p>
                    <p >烤香菇</p>
                    <p >青椒</p>
                    <p >烤面筋</p>
                    <p >葱香豆皮</p>
                    <p >香叶豆腐</p>
                    <p >葱香茄子</p>
                    <p >烤年糕</p>
                    <p >玉米</p>
                    <p >油炸花生米</p>
                    <p >烤大葱</p>
                    <p >白干豆腐</p>
                </div>
            </div>
        </t-right-menu>
        </div>
    </t-page>
</template>

<script>
    export default {
        data() {
            return {
                movestartStatY: 0,//movestart时候的touch点y的坐标
                movestartHeight:0,//movestart时候的banner的高
                movestartScrollTop:0//movestart时候的右侧食物列表scrollTop的值
            }
        },
        methods: {
            touchmove($event) {
                console.log($event,1)
            }
        },
        mounted(){
            let _this = this;
            let topFix = _this.$el.querySelector('.banner');
            this.$el.addEventListener('touchstart',function(event){
                console.log('touchstart',event);
                _this.movestartStatY = event.changedTouches[0].screenY;
                _this.movestartHeight = topFix.clientHeight
                _this.movestartScrollTop = _this.$el.querySelector('.menu-right').scrollTop;
            })
            this.$el.addEventListener('touchmove',function(event){
                // console.log('touchmove',event);
                
                // console.log('scrollTop',scrollTop);
                //鼠标点击是距离上面为0，right可以滑动，
                let clientHeight = topFix.clientHeight
                let scrollTop = _this.$el.querySelector('.menu-right').scrollTop;
                if(scrollTop===0&&_this.movestartScrollTop===0){
                    let height=_this.movestartHeight + event.changedTouches[0].screenY - _this.movestartStatY;
                    if(height<=0){
                        topFix.style.height=0;
                        //添加scroll
                        _this.$el.querySelector('.menu-right').classList.add('menu-right-scroll');
                    }else if(height>=200){
                        topFix.style.height=200+'px';
                         _this.$el.querySelector('.menu-right').classList.add('menu-right-scroll');
                    }else{
                        topFix.style.height=height+'px';
                        _this.$el.querySelector('.menu-right').classList.remove('menu-right-scroll');
                    }
                    // console.log('style.height',_this.$el.querySelector('.top-fix').offsetHeight+event.changedTouches.clientY-_this.statY);
                }
            })
            // var hammer = new Hammer(this.$refs.go);
            // hammer.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });
            // hammer.on('swipe', function(ev) {
            //     // console.log(ev,11111111)
            // })
        }
    }
</script>

<style lang='scss' scoped>
.mecontainer{
    height: 100%;
    overflow: hidden;
}
.banner{
    width: 200px;
    height: 200px;
    background-color: black;
}

// 左右菜单开始
.menu-left{
    width: 25%;
    max-height: 100vh;
    height: 100vh;
    overflow: scroll;
    background-color: #eee;
    [left-item]{
        padding: 5vw 0;
        background-color: #eee;
        margin: 0;
    }
    [left-item].t-active{
        background-color: #fff;
    }
}
.menu-right-scroll{
    overflow: scroll !important;
}
.menu-right{
    text-align: start;
    height: 100%;
    width: 75%;
    max-height: 100vh;
    overflow: hidden;
    color: #555;
    padding-left: 3vw;
    .food-item{
        display: flex;
        margin-bottom: 4vw;
        >img{
            display: block;
            width: 22.6vw;
            height: 22.6vw;
        }
        >div{
            padding-left: 3vw;
        }
        .header{
            color: #555;
            font-size: 5vw;
            font-weight: bold;
        }
        .tips{
            color: #aaa;
            display: block;
            font-size: 3.6vw;
        }
        .sale , .like{
            font-size: 3.6vw;
            color: #aaa;
        }
        .price{
            color: #ff4c41;
            font-weight: 700;
            font-size: 5vw;
        }
    }
    
}
// 左右菜单结束
</style>